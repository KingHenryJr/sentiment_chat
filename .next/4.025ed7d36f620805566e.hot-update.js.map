{"version":3,"file":"4.025ed7d36f620805566e.hot-update.js","sources":["webpack:///components/Chat.js"],"sourcesContent":["// Live Chat \n\nimport React, { Component, Fragment } from 'react';\nimport axios from 'axios';\nimport Pusher from 'pusher-js';\n    \n    class Chat extends Component {\n    \n      state = { chats: [] }\n      \n      componentDidMount() {\n      \n        this.pusher = new Pusher(process.env.PUSHER_APP_KEY, {\n          cluster: process.env.PUSHER_APP_CLUSTER,\n          encrypted: true\n        });\n        \n        this.channel = this.pusher.subscribe('chat-room');\n        \n        this.channel.bind('new-message', ({ chat = null }) => {\n          const { chats } = this.state;\n          chat && chats.push(chat);\n          this.setState({ chats });\n        });\n        \n        this.pusher.connection.bind('connected', () => {\n          axios.post('/messages')\n            .then(response => {\n              const chats = response.data.messages;\n              this.setState({ chats });\n            });\n        });\n        \n      }\n      \n      componentWillUnmount() {\n        this.pusher.disconnect();\n      }\n\n      handleKeyUp = evt => {\n      const value = evt.target.value;\n      \n\t      if (evt.keyCode === 13 && !evt.shiftKey) {\n\t        const { activeUser: user } = this.props;\n\t        const chat = { user, message: value, timestamp: +new Date };\n\t        \n\t        evt.target.value = '';\n\t        axios.post('/message', chat);\n\t      }\n      }\n\n      render() {\n      \n      return (this.props.activeUser && <Fragment>\n      \n        <div className=\"border-bottom border-gray w-100 d-flex align-items-center bg-white\" style={{ height: 90 }}>\n          <h2 className=\"text-dark mb-0 mx-4 px-2\">{this.props.activeUser}</h2>\n        </div>\n        \n        <div className=\"border-top border-gray w-100 px-4 d-flex align-items-center bg-light\" style={{ minHeight: 90 }}>\n          <textarea className=\"form-control px-3 py-2\" onKeyUp={this.handleKeyUp} placeholder=\"Enter a chat message\" style={{ resize: 'none' }}></textarea>\n        </div>\n        \n      </Fragment> \n      )\n    }\n      \n    }\n    \nexport default Chat;\n\n\n// WEBPACK FOOTER //\n// components/Chat.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;AAAA;AAAA;;;;;AA+BA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;;;;;;AAvCA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAKA;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;;;AAEA;AACA;AACA;;;AAcA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AA3DA;AACA;AA8DA;;;;A","sourceRoot":""}